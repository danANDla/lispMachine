# Lisp

text â†’ [reader] â†’ [evaluator] â†’ opcodes

[https://courses.cs.northwestern.edu/325/readings/interpreter.php](https://courses.cs.northwestern.edu/325/readings/interpreter.php)

[https://gigamonkeys.com/book/syntax-and-semantics.html](https://gigamonkeys.com/book/syntax-and-semantics.html)

## [reader]

ÐÐ° Ð²Ñ…Ð¾Ð´ Ð¿Ñ€Ð¸Ð½Ð¸Ð¼Ð°ÐµÑ‚ Ð¿Ñ€Ð¸Ð½Ð¸Ð¼Ð°ÐµÑ‚ Ñ‚ÐµÐºÑÑ‚ Ð¸ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ s-expressions

ÑÐ¸Ð½Ñ‚Ð°ÐºÑÐ¸Ñ ÑÐ¾ÑÑ‚Ð¾Ð¸Ñ‚ Ð¸Ð· s-expressionâ€™Ð¾Ð²

s-expression - ÑÐ¸Ð¼Ð²Ð¾Ð»ÑŒÐ½Ð¾ Ð²Ñ‹Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ - ÑÐ¿Ð¾ÑÐ¾Ð± Ð¿Ñ€ÐµÐ´ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð²Ð»Ð¾Ð¶ÐµÐ½Ð½Ñ‹Ñ… ÑÐ¿Ð¸ÑÐºÐ¾Ð² Ð´Ð°Ð½Ð½Ñ‹Ñ…

**Ð±Ð°Ð·Ð¾Ð²Ñ‹Ðµ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ s-expression**

1. **lists** - Ð¿Ð¾Ð¼ÐµÑ‰Ð°ÑŽÑ‚ÑÑ Ð² ÑÐºÐ¾Ð±ÐºÐ¸, Ð¼Ð¾Ð³ÑƒÑ‚ ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ñ‚ÑŒ Ð»ÑŽÐ±Ð¾Ðµ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð² Ñ€Ð°Ð·Ð´ÐµÐ»ÐµÐ½Ð½Ñ‹Ñ… Ð¿Ñ€Ð¾Ð±ÐµÐ»ÑŒÐ½Ñ‹Ð¼Ð¸ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°Ð¼Ð¸. Ð­Ð»ÐµÐ¼ÐµÐ½Ñ‚Ð°Ð¼Ð¸ ÑÐ²Ð»ÑÑŽÑ‚ÑÑ s-expressionâ€™Ð°Ð¼Ð¸, Ñ‚.Ðµ. lists ÑÐ¾Ð¶ÐµÑ€Ð¶ÑƒÑ‚ atoms Ð¸Ð»Ð¸ lists.
2. **atoms -** Ð²ÑÐµ Ð¾ÑÑ‚Ð°Ð»ÑŒÐ½Ð¾Ðµ.
    - numbers
    - strings
    - names: Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸, Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ, Ð¾Ð¿ÐµÑ€Ð°Ñ‚Ð¾Ñ€Ñ‹.

## [evaluator]

ÐÐ° Ð²Ñ…Ð¾Ð´ Ð¿Ñ€Ð¸Ð½Ð¸Ð¼Ð°ÑŽÑ‚ÑÑ lisp forms Ð¸ Ñ„Ð¾Ñ€Ð¼Ð¸Ñ€ÑƒÐµÑ‚ÑÑ Ð¼Ð°ÑˆÐ¸Ð½Ð½Ñ‹Ð¹ ÐºÐ¾Ð´. ÐÐµ Ð²ÑÐµ s-expression ÑÐ²Ð»ÑÑŽÑ‚ÑÑ lisp-forms. Lisp form - Ð²ÑÑ‘, Ñ‡Ñ‚Ð¾ Ð´Ð¾Ð»Ð¶Ð½Ð¾ Ð±Ñ‹Ñ‚ÑŒ Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¾ (evalueted). ÐœÐ¾Ð¶Ð½Ð¾ ÑÐºÐ°Ð·Ð°Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾ *Ð’Ñ‹Ñ‡Ð¸ÑÐ»Ð¸Ñ‚ÐµÐ»ÑŒ (evaluator)* ÑÑ‚Ð¾ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ (Ð² Ð¾Ð±Ñ‰ÐµÐ¼ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ð¸), ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð½Ð° Ð²Ñ…Ð¾Ð´ Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÑ‚ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½ÑƒÑŽ Lisp form Ð¸ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ð½ÐµÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ.d

**Lisp forms Ð¼Ð¾Ð³ÑƒÑ‚ Ð±Ñ‹Ñ‚ÑŒ:**

- atoms
    - symbols: Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ
    - self-evaluating objects: numbers, strings. ÐºÐ¾Ð½ÑÑ‚Ð°Ð½Ñ‚Ñ‹ `**T**`, `**NIL**` - ÐºÐ°Ð½Ð¾Ð½Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ true Ð¸ false. ****`NIL`**** Ñ‚Ð°ÐºÐ¶Ðµ Ð¾Ð±Ð¾Ð·Ð½Ð°Ñ‡Ð°ÐµÑ‚ Ð¿ÑƒÑÑ‚Ð¾Ð¹ ÑÐ¿Ð¸ÑÐ¾Ðº: ÐµÑÐ»Ð¸ ******reader****** Ð²Ð¸Ð´Ð¸Ñ‚ `()` Ñ‚Ð¾ Ð¸Ð½Ñ‚ÐµÑ€Ð¿Ñ€ÐµÑ‚Ð¸Ñ€ÑƒÐµÑ‚ ÑÑ‚Ð¾ ÐºÐ°Ðº ******`NIL`******. ******`NIL`** Ð² - ÐµÐ´Ð¸Ð½ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ð¹ Ð¾Ð±ÑŠÐµÐºÑ‚ Ð¾Ð´Ð½Ð¾Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾ ÑÐ²Ð»ÑÑŽÑ‰Ð¸Ð¹ÑÑ Ð°Ñ‚Ð¾Ð¼ Ð¸ ÑÐ¿Ð¸ÑÐºÐ¾Ð¼.
- lists
    - functions. Ð’Ñ‹Ñ‡Ð¸ÑÐ»ÑÐµÑ‚ Ð²ÑÐµ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ ÑÐ¿Ð¸ÑÐºÐ° Ð¸ Ð¿Ð¾Ð´Ð°ÐµÑ‚ Ð¸Ñ… Ð½Ð° Ð²Ñ…Ð¾Ð´ Ð¸Ð¼ÐµÐ½Ð¾Ð²Ð°Ð½Ð½Ð¾Ð¹ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ (Ð¿ÐµÑ€Ð²Ð¾Ð¼Ñƒ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñƒ ÑÐ¿Ð¸ÑÐºÐ°).
    - special forms/special operators. ÐÐµ Ð²ÑÐµ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ð¼Ð¾Ð³ÑƒÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ñ‹ ÐºÐ°Ðº Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸. Ð’ ÑÑ‚Ñƒ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€ÑŽÑŽ Ð¿Ð¾Ð¿Ð°Ð´Ð°ÑŽÑ‚ ÐºÐ¾Ð½ÑÑ‚Ñ€ÑƒÐºÐ¸Ð¸, ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ð¸Ñ€ÑƒÑŽÑ‰Ð¸Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñ‹ (control structs)
    - macros. ÐšÐ¾Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸ Ñ€Ð°ÑÑˆÐ¸Ñ€ÑÑŽÑ‰Ð¸Ðµ Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ ÑÐ¸Ð½Ñ‚Ð°ÐºÑÐ¸Ñ Lisp. ÐœÐ°ÐºÑ€Ð¾ÑÑ‹ ÑÑ‚Ð¾ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÑŽÑ‚ s-expression Ð² ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ðµ Ð°Ñ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹ Ð¸ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÑŽÑ‚ Lisp form, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð·Ð°Ñ‚ÐµÐ¼ Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÑÐµÑ‚ÑÑ Ð²Ð¼ÐµÑÑ‚Ð¾ Ð¼Ð°ÐºÑ€Ð¾ÑÐ°. Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÑÐµÑ‚ÑÑ Ð¿Ñ€Ð¸ Ð¿Ð¾Ð¼Ð¾Ñ‰Ð¸ ÐºÐ¾Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸ `**(defmacro macrosName (parametersL))**`
        1. ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ Ð¼Ð°ÐºÑ€Ð¾ÑÐ° Ð¿Ñ€Ð¾Ð±Ñ€Ð°ÑÑ‹Ð²Ð°ÑŽÑ‚ÑÑ Ð² Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ Ð±ÐµÐ· Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ
        2. Lisp form, Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÐ¼Ð°Ñ Ð¼Ð°ÐºÑ€Ð¾ÑÐ¾Ð¼ Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÑÐµÑ‚ÑÑ ÑÐ¾Ð³Ð»Ð°ÑÐ½Ð¾ Ð¾Ð±Ñ‹Ñ‡Ð½Ñ‹Ð¼ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð°Ð¼

****************Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸****************

**********`setq`** - Ð¿Ñ€Ð¸ÑÐ²Ð¾Ð¸Ñ‚ÑŒ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ð¾Ð¹

`**print`** - Ð²Ñ‹Ð²ÐµÑÑ‚Ð¸ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ð¾Ð¹

progn

******************Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸-Ð¾Ð¿ÐµÑ€Ð°Ñ‚Ð¾Ñ€Ñ‹ (Ð² Ð¾Ð±Ñ‰ÐµÐ¼ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ð¸) Ñ‚Ð¾Ð¶Ðµ ÑÐ²Ð»ÑÑŽÑ‚ÑÑ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑÐ¼Ð¸******************

- Ð°Ñ€Ð¸Ñ„Ð¼ÐµÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ
    - **`+`**
    - **`-`**
    - **`mod`**, `**rem**`
- ÑÑ€Ð°Ð²Ð½ÐµÐ½Ð¸Ñ (Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ‡Ð¸ÑÐ»Ð°? Ð¼Ð¾Ð¶Ð½Ð¾ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ‡Ð¸ÑÐ»Ð°, Ð¿Ð¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°)
    - **`> â‰¥`**
    - **`< â‰¤`**
    - **`=`**

**special operators (standard control structs)**

********`**progn`** Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÐµÑ‚ Ð²Ñ‹Ñ‡Ð¸ÑÐ»Ð¸Ñ‚ÑŒ Ð½ÐµÑÐºÐ¾Ð»ÑŒºÐ¾ Ñ„Ð¾Ñ€Ð¼, Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ð¾Ð´Ð½Ð¾Ð¹ Ñ„Ð¾Ñ€Ð¼Ñ‹

******`**setq`** Ð²Ñ‹Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸ÑÐ²Ð¾ÐµÐ½Ð¸Ñ. Ð¿Ñ€Ð¸ÑÐ²Ð°ÐµÐ²ÐµÑ‚ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð¸Ð¼ÐµÐ½Ð¾Ð²Ð°Ð½Ð½Ð¾Ð¹ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ð¾Ð¹

****`if`**  Ð² ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ðµ ÑƒÑÐ»Ð¾Ð²Ð¸Ñ Ð¿Ñ€Ð¸Ð½Ð¸Ð¼Ð°ÐµÑ‚ÑÑ Ñ„Ð¾Ñ€Ð¼Ð°, ÐµÑÐ»Ð¸ Ð¾Ð½ Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÑÐµÐ¼Ð° Ð¸ ÐµÐµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ð½Ðµ ************`NIL`************ , Ñ‚Ð¾ Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÑÐµÑ‚ÑÑ then-form, Ð² Ð¿Ñ€Ð¾Ñ‚Ð¸Ð²Ð½Ð¾Ð¼ ÑÐ»ÑƒÑ‡Ð°Ðµ else-form. Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸ÐµÐ¼ Ð¼Ð°ÐºÑ€Ð¾ÑÐ¾Ð² Ð¼Ð¾Ð¶Ð½Ð¾ ÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ Ð¾Ð¿ÐµÑ€Ð°Ñ‚Ð¾Ñ€ `**when`,** ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÐµÑ‚ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÑÑ‚ÑŒ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ñ„Ð¾Ñ€Ð¼ Ð² ÑÐ»ÑƒÑ‡Ð°Ðµ true Ð¸Ð»Ð¸ false.

******************`loop`** - Ñ†Ð¸ÐºÐ», Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð¿Ð¾ÐºÐ° Ð½Ðµ Ð´Ð¾ÑÑ‚Ð¸Ð³Ð½ÑƒÑ‚ ************`return`** (Ð² Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¾ÑÑ‚Ð¸ loop ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð¼Ð°ÐºÑ€Ð¾ÑÐ¾Ð¼ Ð¸ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½ Ð´Ð¾Ð²Ð¾Ð»ÑŒÐ½Ð¾ [ÑÐ»Ð¾Ð¶Ð½Ð¾](https://sourceforge.net/p/clisp/clisp/ci/default/tree/src/loop.lisp))Ð
